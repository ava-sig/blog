@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html, body, #__nuxt { height: 100%; }
  :root { color-scheme: dark; }
  body { @apply bg-base-bg text-base-text antialiased; }
}

@layer components {
  .container-page { @apply max-w-3xl mx-auto px-4 sm:px-6; }
  .panel { @apply bg-base-panel border border-base-border rounded-2xl shadow-subtle; }
  .panel-muted { @apply bg-base-panel border border-base-border/70 rounded-2xl shadow-subtle; }
  .btn { @apply inline-flex items-center justify-center rounded-md px-3 py-1.5 text-sm font-medium border border-base-border bg-base-panel text-base-text shadow-subtle hover:shadow-lift hover:-translate-y-0.5 transition; }
  .btn-primary { @apply relative overflow-hidden inline-flex items-center justify-center rounded-md px-3 py-1.5 text-sm font-medium text-white shadow-subtle transition duration-normal ease-entrance; }
  .btn-primary { background: linear-gradient(180deg, #4f46e5 0%, #4338ca 100%); }
  .btn-primary:hover { filter: brightness(1.05); transform: translateY(-1px); box-shadow: 0 8px 24px rgba(49,46,129,0.35); }
  .btn-danger { @apply bg-rose-600/10 text-rose-300 border-rose-700 hover:bg-rose-600/20; }
  .input { @apply w-full rounded-md bg-base-panel border border-base-border px-3 py-2 text-base-text placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50; }
  .muted { @apply text-base-sub; }
  .focus-ring { @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500/60 focus-visible:ring-offset-0; }
  .hover-lift { @apply transition-transform duration-normal ease-entrance hover:-translate-y-0.5 hover:shadow-lift; }
  .hover-ring { @apply transition ring-1 ring-transparent hover:ring-base-border/70; }
  /* Use normal prose in light theme; invert only in dark for readability */
  .prose-content { @apply prose prose-zinc max-w-prose md:max-w-2xl; }
  .dark .prose-content { @apply prose-invert; }
  /* Enhance images inside prose for centered 3D presence */
  .prose-content img {
    display: block;
    margin-left: auto;
    margin-right: auto;
    border-radius: 0.75rem; /* rounded-xl */
    border: 1px solid rgba(35,35,41,0.9); /* base border */
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0));
    box-shadow:
      0 18px 40px rgba(0,0,0,0.35), /* deep drop */
      0 6px 16px rgba(0,0,0,0.35),   /* mid drop */
      inset 0 1px 0 rgba(255,255,255,0.06), /* top bevel */
      inset 0 -1px 0 rgba(0,0,0,0.35);      /* bottom bevel */
  }
  /* In dark theme, keep a stronger inner bottom shadow for depth */
  .dark .card-art::after {
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,0.06),
      inset 0 -2px 0 rgba(0,0,0,0.45);
  }

  /* Artistic card bevel with gradient ring and subtle corner accents */
  .card-art { @apply relative overflow-hidden rounded-2xl; }
  .card-art > * { position: relative; z-index: 1; }
  .card-art::before { /* gradient border ring */
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: 1rem; /* match rounded-2xl */
    background: conic-gradient(from 180deg at 50% 50%,
      rgba(129,140,248,0.35) 0deg,
      rgba(168,85,247,0.22) 90deg,
      rgba(39,39,42,0.0) 140deg,
      rgba(39,39,42,0.0) 220deg,
      rgba(99,102,241,0.28) 320deg,
      rgba(129,140,248,0.35) 360deg);
    filter: saturate(110%);
    pointer-events: none;
    z-index: 0;
    opacity: 0.2; /* make background ring subtle in light theme */
  }
  .card-art::after { /* inner bevel + soft top sheen */
    content: "";
    position: absolute;
    inset: 0;
    border-radius: calc(1rem - 2px);
    background:
      /* minimalist corner ticks */
      linear-gradient(45deg, rgba(255,255,255,0.10), rgba(255,255,255,0)) top left / 18px 1px no-repeat,
      linear-gradient(-45deg, rgba(255,255,255,0.10), rgba(255,255,255,0)) top right / 18px 1px no-repeat,
      linear-gradient(-45deg, rgba(255,255,255,0.08), rgba(255,255,255,0)) bottom left / 18px 1px no-repeat,
      linear-gradient(45deg, rgba(255,255,255,0.08), rgba(255,255,255,0)) bottom right / 18px 1px no-repeat,
      /* corner accents (micro parallax via CSS vars --px/--py) */
      radial-gradient(120px 60px at calc(0% + var(--px, 0px)) calc(0% + var(--py, 0px)), rgba(129,140,248,0.12), rgba(129,140,248,0) 60%),
      radial-gradient(100px 50px at calc(100% + var(--px, 0px)) calc(0% + var(--py, 0px)), rgba(168,85,247,0.10), rgba(168,85,247,0) 60%),
      radial-gradient(110px 54px at calc(0% + var(--px, 0px)) calc(100% + var(--py, 0px)), rgba(99,102,241,0.10), rgba(99,102,241,0) 60%),
      linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0) 28%),
      linear-gradient(180deg, rgba(0,0,0,0) 70%, rgba(0,0,0,0.25));
    /* In light theme, avoid heavy inner bottom shadow to prevent double-line with the panel border */
    box-shadow:
      inset 0 1px 0 rgba(255,255,255,0.06);
    pointer-events: none;
    z-index: 0;
    opacity: 0.2; /* reduce background graphics intensity to ~20% */
  }
  .card-art:hover::after {
    background:
      radial-gradient(140px 70px at 0% 0%, rgba(129,140,248,0.18), rgba(129,140,248,0) 60%),
      radial-gradient(120px 60px at 100% 0%, rgba(168,85,247,0.14), rgba(168,85,247,0) 60%),
      radial-gradient(130px 64px at 0% 100%, rgba(99,102,241,0.14), rgba(99,102,241,0) 60%),
      linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0) 28%),
      linear-gradient(180deg, rgba(0,0,0,0) 70%, rgba(0,0,0,0.25));
    opacity: 0.25; /* slightly stronger on hover, still subtle */
  }

  /* Scroll reveal utility */
  .reveal { opacity: 0; transform: translateY(8px); transition: opacity 480ms var(--ease, cubic-bezier(.2,.8,.2,1)), transform 480ms var(--ease, cubic-bezier(.2,.8,.2,1)); }
  .reveal.in { opacity: 1; transform: translateY(0); }
  /* soft stagger using nth-child when used in lists */
  li.reveal { transition-delay: 40ms; }
  li.reveal:nth-child(2) { transition-delay: 80ms; }
  li.reveal:nth-child(3) { transition-delay: 120ms; }
  li.reveal:nth-child(4) { transition-delay: 160ms; }
  li.reveal:nth-child(5) { transition-delay: 200ms; }
}
